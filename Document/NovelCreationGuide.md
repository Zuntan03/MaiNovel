# MaiNovel - ノベル作成ガイド

ノベルの作成について、以下の分類で説明します。

* [コンテの作成](#コンテの作成)
* [ノベルの作成](#ノベルの作成)
* [ノベルの完成前](#ノベルの完成前)
* [ノベルの完成後](#ノベルの完成後)

# コンテの作成

## AI 技術でどんなコンテンツを作るか

AI 技術でのコンテンツ生成は、生成コストが圧倒的に安いのが特徴です。
ですので、安さを活かすようなテーマと手法でコンテンツを作成するのに適しています。

オススメは自分にぴったりな、自分のための表現をすることです。
自分のための表現はこれまで高くて難しく、現実的には限られた人のものでした。
これが AI 技術により、誰でも気軽に自分のための表現ができるようになりつつあります。

より多くの方が自分のためにニッチな表現をすることで、新たな表現にふれる機会が増え、好きな表現が増えることを夢見ています。

また、AI 技術は望む表現の方向性で高い品質を得るのが難しい特性があります。
オススメは表現の方向性を AI が品質を高めやすいものに合わせたり、品質を現時点では妥協したりすることです。

現状の AI 技術で品質を高めようとすると調整に時間がかかってしまい、一番の特徴である安さが失われてしまいます。
将来の進歩した AI 技術でコンテンツを簡単に再生成できることも、AI技術の特性です。
品質はいずれ AI 技術の進歩が補ってくれると信じて、AI に寄り添いながら自分向けに手軽な表現を追い求めてはどうでしょうか。

## 文章と音声の準備

現状の音声合成 AI では、文章と音声を同時に用意することがオススメです。
音声合成 AI は語尾の言い回し一つで不自然な発音になったりしますが、発音を調整するよりも文面に手を入れる方がコストが安いのが現状です。

感嘆詞などの苦手な表現を避けるために、シナリオレベルで AI に寄り添いながら、自分が望むコンテンツを作り上げると、安さと満足度のバランスがよくなります。
表現のどこまでを文章と音声に任せ、どこからを画像に任せるのかも考えながら執筆しましょう。

これまでのコンテンツ作成では、音声の収録後に文章に手を加えることは難しくありました。
ですが、音声合成であれば好きなように文章に手を入れて、音声を手軽に再生成することができます。
面白い画像が生成できたから文章と音声に手を加える、といったことも簡単です。

とっておきの音声については、COEIROINK on VOICEVOX の GUI で調整することもできます。
ですが、ノベルとして保存できるのは、声の種類、文章、音量、再生速度のパラメータのみです。
AI 技術の進歩による再生成の仕様変更や、手軽さやコンパクトさを重視するため、設定できるパラメータは最小限にとどめています。

現状の音声合成 AI では、「[ろさちゃん](https://senolosachan.com/character/)」のように複数の音声スタイルを用意し、これを使い分けることが音声の表現の幅に繋がります。

## ひとこと FAQ

* MYCOEIROINK の追加方法を知りたい。
	* [セットアップガイド](SetupGuide.md)で MYCOEIROINK の追加手順を説明しています。
* voice に設定する ciiStyleId を調べたい。
	* ciiStyleId は COEIROINK インストール先の「speaker\_info/キャラクターハッシュフォルダ/metas.json」で調べられます。
* 複数の音声フォーマットを利用したい。
	* できません。config.audioFormat で指定した音声で統一する必要があります。
* BGM や効果音を鳴らしたい。
	* 対応していません。

# ノベルの作成

## 画像生成の TIPS

あくまで個人的な TIPS です。

* 画像の解像度は？
	* スマホも考慮して縦長の画面を想定し、512px x 768px で生成しています。試行回数を増やすことを重視して、当たりを公開前にアップスケールしています。
* 当たりの画像を見つけるのがしんどい。
	* 現状の一番の課題です。Taggerでタグを多めに生成し、よくないタグを持つ画像を弾くなどを検証していますが、よくないタグの抽出に向いた Tagger を見つけられていません。
* キャラやシーンを手間を掛けずに固定することが難しい。
	* AI 技術の進歩に期待しています。守りたいことを限定したプロンプトで、AI に幅広く絵を用意してもらいつつ、当たりを探すようにしています。
* 絵に邪魔なものがある。
	* 「[Lama Cleaner](https://github.com/Sanster/lama-cleaner)」で消します。

## ひとこと FAQ

* 「～はできますか？」
	* あれこれ試してみたくなった場合は、[ノベルファイルフォーマット](NovelFileFormat.md) を一通り確認してください。<br>
	MaiNovel はオープンソースライセンスで、依存技術を最小限にコンパクトな実装を心がけています。<br>
	やりたいことがありましたら、必要に応じて改造してください。
* アニメーションはできますか？
	* アニメーション webp などが使えます。
* 複数の画像フォーマットを利用したい。
	* config.imageFormat と異なるフォーマットは message.imagePath で指定できます。
	imagePath で config.imageFormat と異なるフォーマットを指定した場合は、完成時には画像を手動でコピーする必要があることにご注意ください。
* 画像生成 AI について、もっと説明して欲しい。
	* 書ききれません。コンテンツに沿った画像を AI で如何に安く生成するか、はとても深いテーマです。

# ノベルの完成前

## 画像を公開用にする

png 画像をまとめて、「[Upscayl](https://github.com/upscayl/upscayl)」などでアップスケールした後に、「[GIMP](https://www.gimp.org/)の[BIMP](https://alessandrofrancesconi.it/projects/bimp/)」などで非可逆圧縮の webp にします。
可逆圧縮よりも非可逆圧縮で解像度を高めたほうが、個人的には好印象です。

## 音声を公開用にする

wav 音声をまとめて、「[fre;ac](https://www.freac.org/)」などで、お好みの圧縮音声に変換します。
wav から AAC-LC 128kbps にすると、ファイルサイズが 6 分の 1 程度になります。

## 権利表記を更新する

COEIROINK や MYCOEIROINK の権利表記を、config の credit に記載するのを忘れないようにしてください。

## 動作確認

音声は通しで聞くと違和感があったりしますので、動作確認に時間がかかります。
私は PC に USB Bluetooth レシーバーを付け、家事などをしながら Bluetooth イヤホンで音声の確認をしています。

## ひとこと FAQ

* 18歳未満の利用を制限したい。
	* index.html の `window.maiNovelPlayer.r18 = false;` を `window.maiNovelPlayer.r18 = true;` にすると、ノベルの起動時に年齢を確認します。

# ノベルの完成後

## ひとこと FAQ

* ノベルの動画を撮影したい。
	* Chrome の「その他のツール > ショートカットを作成」で「ウィンドウとして開く」で撮影に向いたウィンドウを用意できます。これを「Win + G」で起動する「Xbox Game Bar」の「キャプチャ」で録画するのが手軽です。
